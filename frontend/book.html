<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Book Ambulance | ResQNow</title>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #222;
      animation: gradientBG 15s ease infinite;
      background-size: 400% 400%;
      min-height: 100vh;
      position: relative;
      overflow-y: auto;
      font-size: 18px;
    }
    
    @keyframes gradientBG {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    
    /* Bubbles animation */
    .bubbles {
      position: fixed;
      width: 100%;
      height: 100%;
      z-index: -1;
      overflow: hidden;
      top: 0;
      left: 0;
    }
    
    .bubble {
      position: absolute;
      bottom: -100px;
      width: 80px;
      height: 80px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 50%;
      opacity: 0.5;
      animation: rise 10s infinite ease-in;
    }
    
    .bubble:nth-child(1) {
      width: 80px;
      height: 80px;
      left: 10%;
      animation-duration: 8s;
      background: rgba(255, 107, 107, 0.3);
    }
    
    .bubble:nth-child(2) {
      width: 60px;
      height: 60px;
      left: 20%;
      animation-duration: 5s;
      animation-delay: 1s;
      background: rgba(173, 216, 230, 0.3);
    }
    
    .bubble:nth-child(3) {
      width: 100px;
      height: 100px;
      left: 35%;
      animation-duration: 7s;
      animation-delay: 2s;
      background: rgba(144, 238, 144, 0.3);
    }
    
    .bubble:nth-child(4) {
      width: 150px;
      height: 150px;
      left: 50%;
      animation-duration: 11s;
      animation-delay: 0s;
      background: rgba(255, 182, 193, 0.3);
    }
    
    .bubble:nth-child(5) {
      width: 70px;
      height: 70px;
      left: 55%;
      animation-duration: 6s;
      animation-delay: 1s;
      background: rgba(255, 255, 0, 0.3);
    }
    
    .bubble:nth-child(6) {
      width: 90px;
      height: 90px;
      left: 65%;
      animation-duration: 8s;
      background: rgba(153, 50, 204, 0.3);
    }
    
    .bubble:nth-child(7) {
      width: 70px;
      height: 70px;
      left: 75%;
      animation-duration: 7s;
      animation-delay: 3s;
      background: rgba(255, 165, 0, 0.3);
    }
    
    .bubble:nth-child(8) {
      width: 130px;
      height: 130px;
      left: 80%;
      animation-duration: 12s;
      animation-delay: 2s;
      background: rgba(0, 255, 255, 0.3);
    }
    
    .bubble:nth-child(9) {
      width: 50px;
      height: 50px;
      left: 70%;
      animation-duration: 5s;
      animation-delay: 1s;
      background: rgba(255, 192, 203, 0.3);
    }
    
    .bubble:nth-child(10) {
      width: 100px;
      height: 100px;
      left: 85%;
      animation-duration: 9s;
      animation-delay: 4s;
      background: rgba(124, 252, 0, 0.3);
    }
    
    @keyframes rise {
      0% {
        bottom: -100px;
        transform: translateX(0);
      }
      50% {
        transform: translateX(100px);
      }
      100% {
        bottom: 1080px;
        transform: translateX(-200px);
      }
    }

    .navbar {
      background: rgba(255, 255, 255, 0.1);
      padding: 25px 12%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(10px);
      position: relative;
      z-index: 100;
    }

    .navbar h1 {
      color: #fff;
      font-size: 36px;
      text-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }

    .navbar a {
      text-decoration: none;
      background: rgba(255, 255, 255, 0.1);
      color: #fff;
      padding: 15px 24px;
      border-radius: 10px;
      margin-left: 20px;
      font-weight: 500;
      transition: all 0.3s ease;
      border: 1px solid rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(5px);
      font-size: 20px;
    }

    .navbar a:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: scale(1.05);
    }

    .container {
      max-width: 800px;
      margin: 50px auto;
      background: rgba(255, 255, 255, 0.9);
      padding: 40px;
      border-radius: 20px;
      box-shadow: 0 0 25px rgba(0, 0, 0, 0.15);
      backdrop-filter: blur(5px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      position: relative;
      z-index: 10;
    }

    h2 {
      text-align: center;
      margin-bottom: 30px;
      color: #ff6b6b;
      font-size: 32px;
    }

    label {
      display: block;
      margin-top: 22px;
      font-weight: 600;
      color: #333;
      font-size: 18px;
    }

    input, select, textarea {
      width: 100%;
      padding: 16px;
      margin-top: 10px;
      border: 1px solid #ccc;
      border-radius: 10px;
      font-size: 18px;
      background-color: #fefefe;
      transition: all 0.3s ease;
    }
    
    input:focus, select:focus, textarea:focus {
      outline: none;
      border-color: #ff6b6b;
      box-shadow: 0 0 10px rgba(255, 107, 107, 0.5);
    }

    textarea {
      resize: vertical;
    }
    
    /* Validation styles */
    .form-group {
      position: relative;
      margin-bottom: 20px;
    }
    
    /* Progress bar */
    .progress-bar {
      width: 100%;
      height: 10px;
      background-color: #e0e0e0;
      border-radius: 5px;
      margin-bottom: 15px;
      overflow: hidden;
    }
    
    .progress {
      height: 100%;
      background: linear-gradient(90deg, #ff6b6b, #ff8e53);
      width: 0%;
      transition: width 0.3s ease;
      border-radius: 5px;
    }
    
    .progress-text {
      text-align: center;
      margin-bottom: 20px;
      font-weight: bold;
      color: #ff6b6b;
    }
    
    .error {
      color: #ff4757;
      font-size: 14px;
      margin-top: 5px;
      display: none;
    }
    
    input.invalid, select.invalid, textarea.invalid {
      border-color: #ff4757;
      box-shadow: 0 0 5px rgba(255, 71, 87, 0.5);
    }
    
    input.valid, select.valid, textarea.valid {
      border-color: #2ed573;
      box-shadow: 0 0 5px rgba(46, 213, 115, 0.5);
    }
    
    .button-group {
      margin-top: 30px;
      text-align: center;
    }

    .btn-submit {
      background: linear-gradient(135deg, #ff6b6b, #ff8e53);
      color: white;
      padding: 18px 36px;
      font-size: 20px;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 6px 20px rgba(255, 107, 107, 0.4);
    }

    .btn-submit:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(255, 107, 107, 0.6);
      background: linear-gradient(135deg, #ff8e53, #ff6b6b);
    }
    
    .btn-submit:active {
      transform: translateY(1px);
    }

    footer {
      text-align: center;
      font-size: 13px;
      padding: 20px 10px;
      color: #fff;
      border-top: 1px solid rgba(255, 255, 255, 0.2);
      background: rgba(0, 0, 0, 0.2);
      backdrop-filter: blur(5px);
      position: relative;
      z-index: 10;
    }

    @media (max-width: 1024px) {
      .container {
        max-width: 90%;
        padding: 30px;
      }

      h2 {
        font-size: 28px;
      }

      label {
        font-size: 16px;
      }

      input, select, textarea {
        font-size: 16px;
      }

      .btn-submit {
        font-size: 18px;
        padding: 16px 32px;
      }
    }

    @media (max-width: 768px) {
      .navbar {
        flex-direction: column;
        align-items: center;
        padding: 15px 5%;
      }

      .navbar h1 {
        font-size: 24px;
        margin-bottom: 10px;
      }

      .navbar a {
        margin: 5px 0;
        padding: 10px 15px;
        font-size: 16px;
      }

      .container {
        margin: 15px;
        padding: 25px;
        border-radius: 15px;
      }

      h2 {
        font-size: 24px;
        margin-bottom: 20px;
      }

      label {
        margin-top: 15px;
        font-size: 15px;
      }

      input, select, textarea {
        padding: 12px;
        font-size: 14px;
        border-radius: 8px;
      }

      .btn-submit {
        width: 100%;
        font-size: 16px;
        padding: 14px 25px;
        border-radius: 10px;
      }

      footer {
        font-size: 11px;
        padding: 15px 5px;
      }
    }

    @media (max-width: 480px) {
      .navbar {
        padding: 10px 3%;
      }

      .navbar h1 {
        font-size: 20px;
      }

      .navbar a {
        font-size: 14px;
        padding: 8px 12px;
      }

      .container {
        margin: 10px;
        padding: 20px;
      }

      h2 {
        font-size: 20px;
      }

      label {
        font-size: 14px;
      }

      input, select, textarea {
        padding: 10px;
        font-size: 13px;
      }

      .btn-submit {
        font-size: 14px;
        padding: 12px 20px;
      }

      footer {
        font-size: 10px;
      }
    }

  header h1 {
      color: #fff;
      font-weight: bold;
      font-size: 20px;
      text-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }

     header, footer {
      background: rgba(255, 255, 255, 0.1);
      padding: 20px 10%;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .nav-left a {
  text-decoration: none;
}

.nav-left h1 {
  margin: 0;
  font-size: 20px;
  color: #fff;
  white-space: nowrap;
  border-bottom: none;
  text-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

nav.nav-right {
      display: flex;
      gap: 15px;
      align-items: center;
    }
    nav.nav-right a {
      color: #fff;
      text-decoration: none;
      font-size: 14px;
      font-weight: 500;
      padding: 8px 16px;
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 20px;
      transition: 0.3s ease;
      backdrop-filter: blur(5px);
      background: rgba(255, 255, 255, 0.1);
    }
    nav.nav-right a:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }
    
    /* Pulsing animation for important elements */
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }
    
    .pulse {
      animation: pulse 2s infinite;
    }
    
    /* Dark mode styles */
    .dark-mode {
      --bg-color: #121212;
      --text-color: #ffffff;
      --card-bg: #1e1e1e;
      --border-color: #333333;
    }
    
    .dark-mode body {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      color: var(--text-color);
    }

    .dark-mode header {
      background: rgba(30, 30, 46, 0.7);
    }

    .dark-mode .navbar a {
      background: rgba(255, 255, 255, 0.1);
      color: #ffffff !important;
    }

    .dark-mode .navbar a:hover {
      background: rgba(255, 255, 255, 0.3);
    }

    .dark-mode .container {
      background: rgba(30, 30, 46, 0.9);
      color: #ffffff;
    }

    .dark-mode h2 {
      color: #ffffff !important;
    }

    .dark-mode label {
      color: #ffffff !important;
    }

    .dark-mode input,
    .dark-mode select,
    .dark-mode textarea {
      background: rgba(255, 255, 255, 0.1);
      color: #ffffff !important;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .dark-mode .btn {
      color: #ffffff !important;
    }

    .dark-mode .form-group a {
      color: #ffeb3b !important;
    }

    /* Dark mode dropdown menu styles */
    .dark-mode .dropdown-content {
      background-color: #1e1e1e !important;
      color: #ffffff !important;
    }

    .dark-mode .dropdown-content a {
      color: #ffffff !important;
      background-color: #1e1e1e !important;
    }

    .dark-mode .dropdown-content a:hover {
      background-color: #333333 !important;
      color: #ffeb3b !important;
    }

    .dark-mode .dropdown-btn {
      background: rgba(255, 255, 255, 0.1) !important;
      color: #ffffff !important;
      border: 1px solid rgba(255, 255, 255, 0.2) !important;
    }

    .dark-mode footer {
      background: rgba(30, 30, 46, 0.7);
    }
    
    /* Dark mode toggle button */
    .theme-toggle {
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      color: white;
      padding: 6px 12px;
      border-radius: 20px;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.3s ease;
      margin-left: 10px;
    }
    
    .theme-toggle:hover {
      background: rgba(255, 255, 255, 0.2);
    }
    
    .dark-mode .theme-toggle {
      background: rgba(255, 255, 255, 0.2);
    }
    
    .dark-mode .theme-toggle:hover {
      background: rgba(255, 255, 255, 0.3);
    }
    
    /* Emergency contact buttons */
    .emergency-contacts {
      margin-top: 20px;
      padding-top: 20px;
      border-top: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    .emergency-contacts h3 {
      text-align: center;
      margin-bottom: 15px;
      color: #ffeb3b;
    }
    
    .contact-buttons {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 15px;
    }
    
    .emergency-btn {
      display: inline-block;
      background: linear-gradient(135deg, #ff6b6b, #ff8e53);
      color: white;
      text-decoration: none;
      padding: 12px 20px;
      border-radius: 30px;
      font-weight: bold;
      text-align: center;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4);
      border: none;
      cursor: pointer;
      min-width: 120px;
    }
    
    .emergency-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(255, 107, 107, 0.6);
      background: linear-gradient(135deg, #ff8e53, #ff6b6b);
    }
    
    .emergency-btn:active {
      transform: translateY(1px);
    }
    
    .dark-mode .emergency-btn {
      background: linear-gradient(135deg, #1a1a2e, #16213e);
      box-shadow: 0 4px 15px rgba(26, 26, 46, 0.4);
    }
    
    .dark-mode .emergency-btn:hover {
      box-shadow: 0 6px 20px rgba(26, 26, 46, 0.6);
      background: linear-gradient(135deg, #16213e, #1a1a2e);
    }
  </style>
</head>
<body>
  <!-- Bubbles Container -->
  <div class="bubbles">
    <div class="bubble"></div>
    <div class="bubble"></div>
    <div class="bubble"></div>
    <div class="bubble"></div>
    <div class="bubble"></div>
    <div class="bubble"></div>
    <div class="bubble"></div>
    <div class="bubble"></div>
    <div class="bubble"></div>
    <div class="bubble"></div>
  </div>
  
<header class="reveal">
    <div class="nav-left">
       <a href="index.html"><h1> üöë ResQNow </h1></a>
  </div>
  <nav class="nav-right">
      <a href="index.html">Home</a>
      <button class="theme-toggle" id="themeToggle" title="Toggle dark mode">üåô</button>
    </nav>
  </header>

  <div class="container">
    <h2>üöë Book an Ambulance</h2>
    <form id="bookingForm">
      <div class="form-group">
        <label for="patientName">Patient Name *</label>
        <input type="text" id="patientName" name="patientName" required />
      </div>

      <div class="form-group">
        <label for="pickupLocation">Pickup Location *</label>
        <input type="text" id="pickupLocation" name="pickupLocation" required placeholder="Enter full address" />
      </div>

      <div class="form-group">
        <label for="dropLocation">Drop Location *</label>
        <input type="text" id="dropLocation" name="dropLocation" required placeholder="Enter hospital name or address" />
      </div>

      <div class="form-group">
        <label for="contactNumber">Contact Number *</label>
        <input type="tel" id="contactNumber" name="contactNumber" required placeholder="e.g., 9876543210" />
      </div>

      <div class="form-group">
        <label for="bookingDate">Booking Date & Time *</label>
        <input type="datetime-local" id="bookingDate" name="bookingDate" required />
      </div>

      <div class="form-group">
        <label for="emergency">Emergency Type *</label>
        <select id="emergency" name="emergency" required>
          <option value="">Select emergency type</option>
          <option value="Cardiac Arrest">Cardiac Arrest</option>
          <option value="Stroke">Stroke</option>
          <option value="Accident">Accident</option>
          <option value="Childbirth">Childbirth</option>
          <option value="Breathing Difficulty">Breathing Difficulty</option>
          <option value="Severe Injury">Severe Injury</option>
          <option value="Other Medical">Other Medical</option>
        </select>
      </div>

      <div class="form-group">
        <label for="vehicleType">Ambulance Type</label>
        <select id="vehicleType" name="vehicleType">
          <option value="">Select vehicle type</option>
          <option value="Basic Life Support (BLS)">Basic Life Support (BLS)</option>
          <option value="Advanced Life Support (ALS)">Advanced Life Support (ALS)</option>
          <option value="ICU on Wheels">ICU on Wheels</option>
          <option value="Air Ambulance">Air Ambulance</option>
        </select>
      </div>

      <div class="form-group">
        <label for="additionalInfo">Additional Information</label>
        <textarea id="additionalInfo" name="additionalInfo" rows="4" placeholder="Any additional details about the patient or situation..."></textarea>
      </div>

      <div class="form-group checkbox-group">
        <input type="checkbox" id="terms" name="terms" required />
        <label for="terms">I agree to the <a href="#" onclick="showTerms()">Terms and Conditions</a></label>
      </div>

      <button type="submit" class="btn">Book Ambulance</button>
    </form>
  </div>

  <footer>
    <p>¬© 2025 ResQNow. All rights reserved.</p>
    
    <div class="emergency-contacts">
      <h3>Emergency Contacts</h3>
      <div class="contact-buttons">
        <a href="tel:1800234001" class="emergency-btn">üöë Ambulance <br>1800-234-001</a>
        <a href="tel:102" class="emergency-btn">üö® Police <br>102</a>
        <a href="tel:101" class="emergency-btn">üî• Fire <br>101</a>
        <a href="tel:108" class="emergency-btn">‚öïÔ∏è Medical <br>108</a>
      </div>
    </div>
  </footer>

  <script src="js/config.js"></script>
  <script>
    // Set min datetime to current time
    document.getElementById('bookingDate').min = new Date().toISOString().slice(0, 16);

    // Form submission
    document.getElementById('bookingForm').addEventListener('submit', async function(e) {
      e.preventDefault();

      const token = localStorage.getItem('token');
      if (!token) {
        alert('Please log in first');
        window.location.href = 'login.html';
        return;
      }

      const formData = {
        userId: localStorage.getItem('userId'),
        patientName: document.getElementById('patientName').value,
        pickupLocation: document.getElementById('pickupLocation').value,
        dropLocation: document.getElementById('dropLocation').value,
        contactNumber: document.getElementById('contactNumber').value,
        bookingDate: document.getElementById('bookingDate').value,
        emergency: document.getElementById('emergency').value,
        vehicleType: document.getElementById('vehicleType').value
      };

      try {
        const response = await axios.post(`${API_BASE_URL}/book/create`, formData, {
          headers: {
            'Authorization': `Bearer ${token}`
          }
        });

        if (response.data.msg === 'Booking created successfully') {
          alert('Booking created successfully!');
          window.location.href = 'success.html';
        } else {
          alert('Booking failed: ' + response.data.msg);
        }
      } catch (error) {
        console.error('Booking error:', error);
        alert('Booking failed. Please try again.');
      }
    });

    // Show terms and conditions
    function showTerms() {
      alert('Terms and Conditions:\n\n1. All bookings are subject to availability.\n2. Emergency services are prioritized.\n3. Cancellation policy applies after 10 minutes of booking.\n4. Payment is required upon service completion.\n5. ResQNow is not liable for delays due to traffic or other external factors.');
    }

    // Run the function on page load
    document.addEventListener('DOMContentLoaded', updateNavbarAuthLinks);
  </script>
</body>
</html>